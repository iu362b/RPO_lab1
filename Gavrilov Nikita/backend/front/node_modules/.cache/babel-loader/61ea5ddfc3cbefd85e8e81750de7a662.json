{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ngavr\\\\IdeaProjects\\\\backend\\\\front\\\\src\\\\components\\\\Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport BackendService from \"../services/BackendService\";\nimport Utils from \"../utils/Utils\";\nimport { useNavigate } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { store, userActions } from \"../utils/Rdx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _s(connect()(_s(function Login() {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [loggingIn, setLoggingIn] = useState(false);\n  const [submitted, setSubmitted] = useState(false); //const [error_message, setErrorMessage] = useState(null);\n\n  const nav = useNavigate();\n\n  function handleChangeLogin(e) {\n    setUsername(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setSubmitted(true); //setErrorMessage(null);\n\n    setLoggingIn(true);\n    BackendService.login(username, password).then(resp => {\n      console.log(resp.data);\n      setLoggingIn(false);\n      store.dispatch(userActions.login(resp.data));\n      nav(\"/home\");\n    }).catch(err => {\n      //                if (err.response && err.response.status === 401)\n      //                    setErrorMessage(\"Ошибка авторизации\");\n      //                else\n      //                    setErrorMessage(err.message);\n      setLoggingIn(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-md-6 me-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0412\\u0445\\u043E\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      name: \"form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: 'form-control' + (submitted && !username ? ' is-invalid' : ''),\n          name: \"username\",\n          value: username,\n          onChange: handleChangeLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), submitted && !username && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"help-block text-danger\",\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: 'form-control' + (submitted && !password ? ' is-invalid' : ''),\n          name: \"password\",\n          value: password,\n          onChange: handleChangePassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), submitted && !password && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"help-block text-danger\",\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 52\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          children: [loggingIn && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-border spinner-border-sm\",\n            role: \"status\",\n            \"aria-hidden\": \"true\",\n            onSubmit: handleSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 39\n          }, this), \"\\u0412\\u0445\\u043E\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}, \"8X8gxUfZdDePdyZvdyCWcj60RmA=\", false, function () {\n  return [useNavigate];\n})), \"8X8gxUfZdDePdyZvdyCWcj60RmA=\", false, function () {\n  return [useNavigate];\n}); //\n//class Login extends React.Component {\n//      constructor(props) {\n//          super(props);\n//          this.state = {\n//              username: '',\n//              password: '',\n//              loggingIn: false,\n//              submitted: false,\n//              error_message: null,\n//          };\n//          this.handleChange = this.handleChange.bind(this)\n//          this.handleSubmit = this.handleSubmit.bind(this)\n//      }\n//\n//      handleChange(e) {\n//            const { name, value } = e.target;\n//            this.setState({ [name]: value });\n//      }\n//\n//      handleSubmit(e) {\n//            e.preventDefault();\n//            this.setState({ submitted: true, loggingIn: true, error_message: null });\n//            const { username, password } = this.state;\n//            BackendService.login(username, password)\n//                .then(resp => {\n//                    console.log(resp.data);\n//                    Utils.saveUser(resp.data);\n//                })\n//                .catch( err => {\n//                    if (err.response && err.response.status === 401)\n//                        this.setState( { error_message : \"Ошибка авторизации\", loggingIn: false } );\n//                    else\n//                        this.setState( { error_message : err.message, loggingIn: false  } );\n//                })\n//                .finally(()=> this.setState({ loggingIn : false }));\n//      }\n//\n//      render() {\n//            console.log(\"render\");\n//            let { submitted, username, password, loggingIn } = this.state;\n//            return (\n//                <div className=\"col-md-6 me-0\">\n//                    {this.state.error_message && <div className=\"alert alert-danger mt-1 me-0 ms-0\">\n//                        {this.state.error_message}\n//                    </div>}\n//                <h2>Вход</h2>\n//                <form name=\"form\" onSubmit={this.handleSubmit}>\n//                    <div className=\"form-group\">\n//                        <label htmlFor=\"username\">Логин</label>\n//                        <input type=\"text\" className={'form-control' + (submitted && !username ? ' is-invalid' : '' )}\n//                                name=\"username\" value={username}\n//                                onChange={this.handleChange} />\n//                        {submitted && !username && <div className=\"help-block text-danger\">Введите имя пользователя</div>}\n//                    </div>\n//                    <div className=\"form-group\">\n//                        <label htmlFor=\"password\">Пароль</label>\n//                        <input type=\"password\" className={'form-control' + (submitted && !password ? ' is-invalid' : '' )}\n//                                name=\"password\" value={password}\n//                                onChange={this.handleChange} />\n//                        {submitted && !password && <div className=\"help-block text-danger\">Введите пароль</div>}\n//                    </div>\n//                    <div className=\"form-group mt-2\">\n//                        <button className=\"btn btn-primary\">\n//                            {loggingIn && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"\n//                                onSubmit={this.handleSubmit}></span>}\n//                            Вход\n//                        </button>\n//                    </div>\n//                </form>\n//                </div>\n//            );\n//      }\n//}\n//\n//export default Login;","map":{"version":3,"names":["React","useState","BackendService","Utils","useNavigate","connect","store","userActions","Login","username","setUsername","password","setPassword","loggingIn","setLoggingIn","submitted","setSubmitted","nav","handleChangeLogin","e","target","value","handleChangePassword","handleSubmit","preventDefault","login","then","resp","console","log","data","dispatch","catch","err"],"sources":["C:/Users/ngavr/IdeaProjects/backend/front/src/components/Login.jsx"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport BackendService from \"../services/BackendService\";\r\nimport Utils from \"../utils/Utils\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {store, userActions} from \"../utils/Rdx\";\r\n\r\nexport default connect()(function Login() {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [loggingIn, setLoggingIn] = useState(false);\r\n    const [submitted, setSubmitted] = useState(false);\r\n    //const [error_message, setErrorMessage] = useState(null);\r\n    const nav = useNavigate();\r\n\r\n    function handleChangeLogin(e) {\r\n        setUsername(e.target.value);\r\n    }\r\n\r\n    function handleChangePassword(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        setSubmitted(true);\r\n        //setErrorMessage(null);\r\n        setLoggingIn(true);\r\n        BackendService.login(username, password)\r\n            .then ( resp => {\r\n                console.log(resp.data);\r\n                setLoggingIn(false);\r\n                store.dispatch(userActions.login(resp.data));\r\n                nav(\"/home\");\r\n            })\r\n            .catch( err => {\r\n//                if (err.response && err.response.status === 401)\r\n//                    setErrorMessage(\"Ошибка авторизации\");\r\n//                else\r\n//                    setErrorMessage(err.message);\r\n                setLoggingIn(false);\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"col-md-6 me-0\">\r\n            {/*error_message &&\r\n                <div className=\"alert alert-danger mt-1 me-0 ms-0\">{error_message}</div>*/}\r\n            <h2>Вход</h2>\r\n            <form name=\"form\" onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"username\">Логин</label>\r\n                    <input type=\"text\" className={'form-control' + (submitted && !username ? ' is-invalid' : '' )}\r\n                        name=\"username\" value={username}\r\n                        onChange={handleChangeLogin} />\r\n                    {submitted && !username && <div className=\"help-block text-danger\">Введите имя пользователя</div>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Пароль</label>\r\n                    <input type=\"password\" className={'form-control' + (submitted && !password ? ' is-invalid' : '' )}\r\n                        name=\"password\" value={password}\r\n                        onChange={handleChangePassword} />\r\n                        {submitted && !password && <div className=\"help-block text-danger\">Введите пароль</div>}\r\n                </div>\r\n                <div className=\"form-group mt-2\">\r\n                    <button className=\"btn btn-primary\">\r\n                        {loggingIn && <span className=\"spinner-border spinner-border-sm\"\r\n                            role=\"status\"\r\n                            aria-hidden=\"true\"\r\n                            onSubmit={handleSubmit}>\r\n                        </span>}\r\n                        Вход\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n})\r\n//\r\n//class Login extends React.Component {\r\n//      constructor(props) {\r\n//          super(props);\r\n//          this.state = {\r\n//              username: '',\r\n//              password: '',\r\n//              loggingIn: false,\r\n//              submitted: false,\r\n//              error_message: null,\r\n//          };\r\n//          this.handleChange = this.handleChange.bind(this)\r\n//          this.handleSubmit = this.handleSubmit.bind(this)\r\n//      }\r\n//\r\n//      handleChange(e) {\r\n//            const { name, value } = e.target;\r\n//            this.setState({ [name]: value });\r\n//      }\r\n//\r\n//      handleSubmit(e) {\r\n//            e.preventDefault();\r\n//            this.setState({ submitted: true, loggingIn: true, error_message: null });\r\n//            const { username, password } = this.state;\r\n//            BackendService.login(username, password)\r\n//                .then(resp => {\r\n//                    console.log(resp.data);\r\n//                    Utils.saveUser(resp.data);\r\n//                })\r\n//                .catch( err => {\r\n//                    if (err.response && err.response.status === 401)\r\n//                        this.setState( { error_message : \"Ошибка авторизации\", loggingIn: false } );\r\n//                    else\r\n//                        this.setState( { error_message : err.message, loggingIn: false  } );\r\n//                })\r\n//                .finally(()=> this.setState({ loggingIn : false }));\r\n//      }\r\n//\r\n//      render() {\r\n//            console.log(\"render\");\r\n//            let { submitted, username, password, loggingIn } = this.state;\r\n//            return (\r\n//                <div className=\"col-md-6 me-0\">\r\n//                    {this.state.error_message && <div className=\"alert alert-danger mt-1 me-0 ms-0\">\r\n//                        {this.state.error_message}\r\n//                    </div>}\r\n//                <h2>Вход</h2>\r\n//                <form name=\"form\" onSubmit={this.handleSubmit}>\r\n//                    <div className=\"form-group\">\r\n//                        <label htmlFor=\"username\">Логин</label>\r\n//                        <input type=\"text\" className={'form-control' + (submitted && !username ? ' is-invalid' : '' )}\r\n//                                name=\"username\" value={username}\r\n//                                onChange={this.handleChange} />\r\n//                        {submitted && !username && <div className=\"help-block text-danger\">Введите имя пользователя</div>}\r\n//                    </div>\r\n//                    <div className=\"form-group\">\r\n//                        <label htmlFor=\"password\">Пароль</label>\r\n//                        <input type=\"password\" className={'form-control' + (submitted && !password ? ' is-invalid' : '' )}\r\n//                                name=\"password\" value={password}\r\n//                                onChange={this.handleChange} />\r\n//                        {submitted && !password && <div className=\"help-block text-danger\">Введите пароль</div>}\r\n//                    </div>\r\n//                    <div className=\"form-group mt-2\">\r\n//                        <button className=\"btn btn-primary\">\r\n//                            {loggingIn && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"\r\n//                                onSubmit={this.handleSubmit}></span>}\r\n//                            Вход\r\n//                        </button>\r\n//                    </div>\r\n//                </form>\r\n//                </div>\r\n//            );\r\n//      }\r\n//}\r\n//\r\n//export default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}